<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="broadList_styles.css">
    <title>방송 시작</title>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="header-left">
            <button id="broadcastStart">방송 시작</button>
            <button id="broadcastHow" onclick="window.open('howtostream.html', '_blank')">방송 가이드</button>
            
        </div>
        <div class="header-right" id="userStatus">
            <button id="Login" onclick="window.open('./View/signin.html')">로그인</button>
        </div>
    </header>

    <main>
        <!-- Broadcast List Section -->
        <section class="section-container">
            <h2>방송 목록</h2>
            <div class="broadcastList">
                <!-- Broadcast list dynamically loaded here -->
            </div>
        </section>

        <!-- VOD Section -->
        <section class="section-container">
            <h2>VOD</h2>
            <div class="broadcastList">
                <div>
                    <img src="./stream/Img/img.png" onclick="location.href='vod.html?streamKey=123&channel=99'" alt="VOD Thumbnail">
                    <p class="vod-title">무한도전</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Section -->
    <div id="overlay"></div>
    <div id="modal">
        <form onsubmit="return false">
            <div id="streamKeyContainer">
                <label for="streamKey">스트림 키:</label>
                <input type="password" id="streamKey" readonly name="stream_key">
                <i id="toggleStreamKey" class="toggle-password fas fa-eye-slash" onclick="toggleStreamKeyVisibility()"></i>
                <i class="fas fa-copy" onclick="copyToClipboard()"></i>
            </div>
            <label for="broadcastTitle">방송 제목:</label>
            <input type="text" id="title" name="title">
            <label for="broadcastDescription">방송 설명:</label>
            <input type="text" id="description" name="description">
            <label for="category">카테고리:</label>
            <select id="category" name="category">
                <option value="category1" selected>카테고리 1</option>
                <option value="category2">카테고리 2</option>
                <option value="category3">카테고리 3</option>
            </select>
            <div class="modal-buttons">
                <button id="startButton" onclick="startStream()">시작</button>
                <button class="cancel" id="cancelButton">취소</button>
            </div>
        </form>
    </div>

    <script src="APIwithToken.js"></script>
    <script src="ServerUrl.js"></script>
    <script src="./broadList_load.js" defer></script>
    <script src="./broadList_modal.js" defer></script>
    <script src="./broadList_logout.js" defer></script>

    <script>
        // 로그인 여부에 따라 로그인 / 로그아웃 버튼
        (() => {
            if(isLogin()) {
                document.getElementById('userStatus').innerHTML = `<button id="broadcastLogout" onclick="logout()">로그아웃</button>`;
            }
            else {
                document.getElementById('userStatus').innerHTML = `<button id="broadcastHow" onclick="location.href='View/signin.html'">로그인</button>`;
            }
        })();
    </script>
    
</body>
</html>
